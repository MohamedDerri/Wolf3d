/* ************************************************************************** */
/*                                                                            */
/*                                                        :::      ::::::::   */
/*   wolf3d.c                                           :+:      :+:    :+:   */
/*                                                    +:+ +:+         +:+     */
/*   By: slaanani <slaanani@student.42.fr>          +#+  +:+       +#+        */
/*                                                +#+#+#+#+#+   +#+           */
/*   Created: 2019/11/22 03:40:39 by mderri            #+#    #+#             */
/*   Updated: 2019/11/22 21:55:58 by slaanani         ###   ########.fr       */
/*                                                                            */
/* ************************************************************************** */

#include "wolf3d.h"

// void	raycaster(t_wolf *w, int **map)
// {
// 	int x = 0;
// 	int y = 0;

// 	while (y < MAP_HEIGHT)
// 	{
// 		w->cam.position.x = 2  * y / (long double)MAP_WIDTH - 1;
// 		w->cam.forward = create_v(0, 0, 1);
// 		w->ray.x =  + 1 * w->cam.position.x;
// 		y++;
// 	}
// }

int		main(void)
{
	t_wolf	w;
	// int				map[MAP_HEIGHT][MAP_WIDTH] =
	// {
	// 	{4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,7,7,7,7,7,7,7,7},
	// 	{4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,0,0,0,0,0,0,7},
	// 	{4,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7},
	// 	{4,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7},
	// 	{4,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,7,0,0,0,0,0,0,7},
	// 	{4,0,4,0,0,0,0,5,5,5,5,5,5,5,5,5,7,7,0,7,7,7,7,7},
	// 	{4,0,5,0,0,0,0,5,0,5,0,5,0,5,0,5,7,0,0,0,7,7,7,1},
	// 	{4,0,6,0,0,0,0,5,0,0,0,0,0,0,0,5,7,0,0,0,0,0,0,8},
	// 	{4,0,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,7,7,1},
	// 	{4,0,8,0,0,0,0,5,0,0,0,0,0,0,0,5,7,0,0,0,0,0,0,8},
	// 	{4,0,0,0,0,0,0,5,0,0,0,0,0,0,0,5,7,0,0,0,7,7,7,1},
	// 	{4,0,0,0,0,0,0,5,5,5,5,0,5,5,5,5,7,7,7,7,7,7,7,1},
	// 	{6,6,6,6,6,6,6,6,6,6,6,0,6,6,6,6,6,6,6,6,6,6,6,6},
	// 	{8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4},
	// 	{6,6,6,6,6,6,0,6,6,6,6,0,6,6,6,6,6,6,6,6,6,6,6,6},
	// 	{4,4,4,4,4,4,0,4,4,4,6,0,6,2,2,2,2,2,2,2,3,3,3,3},
	// 	{4,0,0,0,0,0,0,0,0,4,6,0,6,2,0,0,0,0,0,2,0,0,0,2},
	// 	{4,0,0,0,0,0,0,0,0,0,0,0,6,2,0,0,5,0,0,2,0,0,0,2},
	// 	{4,0,0,0,0,0,0,0,0,4,6,0,6,2,0,0,0,0,0,2,2,0,2,2},
	// 	{4,0,6,0,6,0,0,0,0,4,6,0,0,0,0,0,5,0,0,0,0,0,0,2},
	// 	{4,0,0,5,0,0,0,0,0,4,6,0,6,2,0,0,0,0,0,2,2,0,2,2},
	// 	{4,0,6,0,6,0,0,0,0,4,6,0,6,2,0,0,5,0,0,2,0,0,0,2},
	// 	{4,0,0,0,0,0,0,0,0,4,6,0,6,2,0,0,0,0,0,2,0,0,0,2},
	// 	{4,4,4,4,4,4,4,4,4,4,1,1,1,2,2,2,2,2,2,3,3,3,3,3}
	// };

	// if (argc != 2)
	// {
	// 	ft_putstr("Usage : ./wolf3d labyrinthe\n");
	// 	exit(0);
	// }
	w.m.h = 800;
	w.m.w = 800;
	w.name = ft_strdup("WOLF3D - mderri && slaanani");
	w.m.ptr = mlx_init();
	w.m.win = mlx_new_window(w.m.ptr, w.m.w, w.m.h, w.name);
	w.m.d.img_ptr = mlx_new_image(w.m.ptr, w.m.w, w.m.h);
	w.m.d.pic_str = (int *)mlx_get_data_addr(w.m.d.img_ptr, &w.m.d.bpp,
&w.m.d.s_l, &w.m.d.endian);
	// create_camera(&w);
	// raycaster(&w, map);
	mlx_put_image_to_window(w.m.ptr, w.m.win, w.m.d.img_ptr, 0, 0);
	mlx_hook(w.m.win, 2, 1, event_handle, &w.m);
	mlx_hook(w.m.win, 17, 1, ft_close, &w.m);
	mlx_loop(w.m.ptr);
	return (0);
}
